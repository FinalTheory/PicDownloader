<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width">
    
    <title>用户设置</title>
    
    <meta name="robots" content="noindex, nofollow">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="/assets/css/bootmetro.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/bootmetro-responsive.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/bootmetro-icons.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/bootmetro-ui-light.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/datepicker.css">
    <link rel="shortcut icon" href="/assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="/assets/ico/apple-touch-icon-57-precomposed.png">
    <script src="/assets/js/modernizr-2.6.2.min.js"></script>
    <style>
html,
body {
   position: relative;
   background-color: #f2f0e4;
   background: transparent url(/assets/img/bkg-4.png) repeat 0 0;
   color: #847d6b;
}
    </style>
  </head>
  <body>
    <div class="container">
      <div id="nav-bar">
	<div class="row">
	  <div class="span9">
	    <div id="header-container">
	      <a id="backbutton" class="win-backbutton" href="/"></a>
	      <h5>下载器</h5>
	      <div class="dropdown">
		<a class="header-dropdown dropdown-toggle accent-color" data-toggle="dropdown" href="#">
		  用户设置
		  <b class="caret"></b>
		</a>
		<ul class="dropdown-menu">
		  %if UserStatus == 0 or UserStatus == 1:
		  <li><a href="/modify_tasks">查看任务</a></li>
		  <li><a href="/modify_rules">管理规则</a></li>
		  %endif
		  %if UserStatus == 0:
		  <li><a href="/admin">系统管理</a></li>
		  <li><a href="/log">系统日志</a></li>
		  %endif
		  <li class="divider"></li>
		  <li><a href="/faq">常见问题</a></li>
		</ul>
	      </div>
	    </div>
	  </div>
	</div>
      </div>
      <div class="page-header">
	<h2>用户设置 <small>修改你的个人信息</small></h2>
      </div>
      
      <form method="POST" action="/register" class="form-horizontal">
	<div class="control-group">
	  <label class="control-label" for="UserName">姓名</label>
	  <div class="controls">
	    <input type="text" name="UserName" id="UserName" placeholder="UserName" value="${UserInfo[0].decode('utf-8')}" required="required">
	  </div>
	</div>
	<div class="control-group">
	  <label class="control-label" for="Tel">联系电话</label>
	  <div class="controls">
	    <input type="text" name="Tel" id="Tel" placeholder="Tel" value="${UserInfo[1].decode('utf-8')}" required="required">
	  </div>
	</div>
	<div class="control-group">
	  <label class="control-label" for="UID">电子邮件</label>
	  <div class="controls">
	    <input type="text" name="E-mail" id="E-mail" placeholder="E-mail" value="${UserInfo[2].decode('utf-8')}" required="required">
	  </div>
	</div>
	<div class="control-group">
	  <label class="control-label" for="MaxFiles">最大文件数量</label>
	  <div class="controls">
	    <input type="text" name="MaxFiles" id="MaxFiles" placeholder="MaxFiles" value="${UserInfo[3]}" required="required">
	  </div>
	</div>
	<div class="control-group">
	  <label class="control-label" for="MaxSize">最大可用空间(MB)</label>
	  <div class="controls">
	    <input type="text" name="MaxSize" id="MaxSize" placeholder="MaxSize" value="${UserInfo[4]}" required="required">
	  </div>
	</div>
	<div class="control-group">
	  <label class="control-label" for="NameRule">文件命名规则</label>
	  <div class="controls">
	    <input type="text" name="NameRule" id="NameRule" placeholder="NameRule" value="${UserInfo[5].decode('utf-8')}" required="required">
	  </div>
	</div>
	<div class="control-group">
	  <label class="control-label" for="Downloader">默认下载器</label>
	  <div class="controls">
            <select name="Downloader">
	      %if UserInfo[6] == "aria2":
              <option value="aria2" selected="selected">Aria2</option>
	      %else:
              <option value="aria2">Aria2</option>
	      %endif
	      %if UserInfo[6] == "wget":
              <option value="wget" selected="selected">Wget</option>
	      %else:
              <option value="wget">Wget</option>
	      %endif
	      %if UserInfo[6] == "python":
              <option value="python" selected="selected">Python默认</option>
	      %else:
              <option value="python">Python默认</option>
	      %endif
            </select>
	  </div>
	</div>
	<div class="control-group">
	  <label class="control-label" for="OldPassWord">原密码</label>
	  <div class="controls">
	    <input type="password" name="OldPassWord" id="oldpasswd" placeholder="Old passWord">
	  </div>
	</div>
	<div class="control-group">
	  <label class="control-label" for="NewPassWord">新密码</label>
	  <div class="controls">
	    <input type="password" name="NewPassWord" id="passwd1" placeholder="New passWord">
	  </div>
	</div>
	<div class="control-group">
	  <label class="control-label" for="passwd2">确认密码</label>
	  <div class="controls">
	    <input type="password" name="passwd2" id="passwd2" placeholder="Confirm password">
	  </div>
	</div>
	<div class="control-group">
	  <div class="controls">
	    <input type="submit" class="btn btn-success" value="提交" />
	  </div>
	</div>
      </form>
    </div>
    
    <!-- Grab Google CDN's jQuery. fall back to local if necessary -->
    <script src="//code.jquery.com/jquery-1.10.0.min.js"></script>
    <script>window.jQuery || document.write(String.fromCharCode(60) + "script src='../assets/js/jquery-1.10.0.min.js'>\x3C/script>")</script>
    <!--[if IE 7]>
        <script type="text/javascript" src="scripts/bootmetro-icons-ie7.js"></script>
    <![endif]-->
    
    <script type="text/javascript" src="/assets/js/google-code-prettify/prettify.js"></script>
    <script type="text/javascript" src="/assets/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/assets/js/bootmetro-panorama.js"></script>
    <script type="text/javascript" src="/assets/js/bootmetro-pivot.js"></script>
    <script type="text/javascript" src="/assets/js/bootmetro-charms.js"></script>
    <script type="text/javascript" src="/assets/js/bootstrap-datepicker.js"></script>
    <script type="text/javascript" src="/assets/js/holder.js"></script>
    <script type="text/javascript" src="/assets/js/Chart.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function() {
        $("form").submit(function(e) {
            var passwd1 = $("#passwd1").val();
            var passwd2 = $("#passwd2").val();
            if ( passwd1 != passwd2 ) {
                e.preventDefault();
                alert("两次输入的密码不一致，请重新输入！");
            } else if ( passwd1.length < 6 ) {
                e.preventDefault();
                alert("密码长度太短！");
            }
        })
    })
    </script>
  </body>
</html>
